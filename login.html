<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login Form</title>
   <link rel="stylesheet" href="styles/style.css">
   <script type="module" src="script.js" defer></script>
</head>

<body>
   <form id="loginForm" class="form-container">
      <label for="email_address">Email Address</label>
      <input type="text" id="email_address" class="input-field" placeholder="john.doe@example.com" required>

      <label for="user_password">Password</label>
      <input type="password" id="user_password" class="input-field" required>

      <input type="submit" id="submit_button" class="submit-button" value="Login">
   </form>
</body>

</html>

<script type="module">
   import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
   import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

   const firebaseConfig = {
      apiKey: "AIzaSyC27V2d0DOfVG9CZgvEyqwNfAT0NHtpK60",
      authDomain: "furdopt-d1f7b.firebaseapp.com",
      projectId: "furdopt-d1f7b",
      storageBucket: "furdopt-d1f7b.appspot.com",
      messagingSenderId: "53446944629",
      appId: "1:53446944629:web:be765ca3745b2c6ff3553c",
      measurementId: "G-68ERH7FMP0"
   };

   const app = initializeApp(firebaseConfig);
   const auth = getAuth();

   document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const userEmail = document.getElementById('email_address').value;
      const userPass = document.getElementById('user_password').value;

      console.log("Email:", userEmail);
      console.log("Password:", userPass);

      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailPattern.test(userEmail)) {
         alert("Please enter a valid email address.");
         return;
      }

      try {
         const userCredential = await signInWithEmailAndPassword(auth, userEmail, userPass);
         console.log("Login successful:", userCredential.user.email);
         alert("You have successfully logged in!");
         // Optionally redirect to another page
         // window.location.assign("./dashboard.html");

      } catch (error) {
         console.error("Error logging in:", error);
         alert("There was an error logging in: " + error.message);
      }
   });
</script>

</html>